<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3D Print Manager</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background: linear-gradient(135deg, #3B5323, #FFA500);
    color: white;
  }

  header {
    background: black;
    padding: 20px;
    text-align: center;
    font-size: 2em;
    font-weight: bold;
    color: #FFA500;
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
  }

  .container {
    max-width: 750px;
    margin: 50px auto;
    background: rgba(0,0,0,0.9);
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.5);
    transition: transform 0.3s ease, opacity 0.3s ease;
  }

  .container.show {
    transform: translateY(0);
    opacity: 1;
  }

  h1, h2 {
    color: #FFA500;
    text-align: center;
  }

  button {
    margin: 5px;
    padding: 10px 20px;
    border: none;
    background: #3B5323;
    color: white;
    cursor: pointer;
    border-radius: 10px;
    font-weight: bold;
    transition: 0.3s;
  }

  button:hover {
    background: #FFA500;
    color: black;
  }

  input, textarea, select {
    display: block;
    margin: 5px 0 15px;
    width: 100%;
    padding: 10px;
    border: 2px solid #FFA500;
    border-radius: 10px;
    background: black;
    color: white;
    transition: border 0.3s ease;
  }

  input:focus, textarea:focus, select:focus {
    border-color: #3B5323;
    outline: none;
  }

  .hidden { display: none; }
  .size-btn-group button { width: 30%; }
  #infoDisplay p {
    margin: 5px 0;
    padding: 10px;
    background: #3B5323;
    border-radius: 10px;
    transition: background 0.3s ease;
  }
  #infoDisplay p:hover {
    background: #FFA500;
    color: black;
  }
</style>
</head>
<body>
<div class="container show" id="passwordContainer">
<h2>Enter Password to Access</h2>
<input type="password" id="passwordInput" placeholder="Password">
<button id="passwordBtn">Enter</button>
<p id="passwordError" style="color:red"></p>
</div>

<div class="container show hidden" id="mainContainer">
<header>3D Print Manager</header>
<div id="home">
  <button id="addModelBtn">Add 3D Model</button>
  <button id="searchModelBtn">Search 3D Model</button>
  <button id="addCustomerBtn">Add Customers</button>
  <button id="changeInfoBtn">Change Info</button>
</div>

<div id="stepName" class="hidden">
  <h2>Name your 3D Model</h2>
  <input type="text" id="modelNameInput" placeholder="Model Name">
  <button id="nextToSize">Next</button>
  <button id="backToHomeFromName">Back</button>
</div>

<div id="stepSize" class="hidden">
  <h2>Select Size to Add Info</h2>
  <div class="size-btn-group">
    <button class="sizeBtn" data-size="small">Small</button>
    <button class="sizeBtn" data-size="medium">Medium</button>
    <button class="sizeBtn" data-size="large">Large</button>
  </div>
  <button id="saveItemBtn">Save Item</button>
  <button id="backToName">Back</button>
</div>

<div id="stepInfo" class="hidden">
  <h2 id="sizeTitle"></h2>
  <label>Print Time (hours)</label>
  <input type="number" id="printTimeInput">
  <label>Filament Cost ($)</label>
  <input type="number" id="filamentCostInput">
  <label>Sell Price ($)</label>
  <input type="number" id="sellPriceInput">
  <label>Important Info</label>
  <textarea id="importantInfoInput" rows="3"></textarea>
  <button id="backToSizes">Back</button>
</div>

<div id="searchPage" class="hidden">
  <h2>Search 3D Model</h2>
  <input type="text" id="searchInput" placeholder="Enter model name">
  <button id="searchBtn">Search</button>
  <div id="searchResult"></div>
  <button id="backToHomeFromSearch">Back</button>
</div>

<div id="addCustomerPage" class="hidden">
  <h2>Add Customer</h2>
  <p>Search model and size first:</p>
  <input type="text" id="customerModelSearch" placeholder="Enter model name">
  <button id="searchCustomerModelBtn">Next</button>
  <div id="customerSizeSelection" class="hidden">
    <label>Select Size:</label>
    <select id="customerSizeSelect">
      <option value="small">Small</option>
      <option value="medium">Medium</option>
      <option value="large">Large</option>
    </select>
    <button id="addCustomerConfirm">Add Customer</button>
  </div>
  <button id="backToHomeFromCustomer">Back</button>
</div>

<div id="changeInfoPage" class="hidden">
  <h2>Change Info</h2>
  <input type="text" id="changeInfoModelSearch" placeholder="Enter model name">
  <button id="searchChangeInfoBtn">Search</button>
  <div id="changeInfoResult"></div>
  <button id="backToHomeFromChangeInfo">Back</button>
</div>
</div>

<script>
let currentModel = null;
let currentSize = null;
let tempData = { small: {}, medium: {}, large: {} };

// Password check
document.getElementById('passwordBtn').onclick = () => {
  const pass = document.getElementById('passwordInput').value;
  if(pass === 'stego'){
    document.getElementById('passwordContainer').classList.add('hidden');
    document.getElementById('mainContainer').classList.remove('hidden');
  } else {
    document.getElementById('passwordError').innerText = 'Incorrect password';
  }
};

function show(id) {
  document.querySelectorAll('#mainContainer > div').forEach(d => d.classList.add('hidden'));
  const div = document.getElementById(id);
  if(div) div.classList.remove('hidden');
}

// Home Buttons
document.getElementById('addModelBtn').onclick = () => show('stepName');
document.getElementById('searchModelBtn').onclick = () => show('searchPage');
document.getElementById('addCustomerBtn').onclick = () => show('addCustomerPage');
document.getElementById('changeInfoBtn').onclick = () => show('changeInfoPage');

// Existing 3D model logic remains (stepName, stepSize, stepInfo, searchPage) ... (kept as before)

// Save customer logic
document.getElementById('searchCustomerModelBtn').onclick = () => {
  const model = document.getElementById('customerModelSearch').value.trim();
  const items = JSON.parse(localStorage.getItem('models') || '{}');
  if(items[model]) {
    currentModel = model;
    document.getElementById('customerSizeSelection').classList.remove('hidden');
  } else {
    alert('Model not found');
  }
};

document.getElementById('addCustomerConfirm').onclick = () => {
  const size = document.getElementById('customerSizeSelect').value;
  const items = JSON.parse(localStorage.getItem('models') || '{}');
  if(!items[currentModel][size].customers) items[currentModel][size].customers = 0;
  items[currentModel][size].customers += 1;
  localStorage.setItem('models', JSON.stringify(items));
  alert('Customer added! Total: ' + items[currentModel][size].customers);
};

document.getElementById('backToHomeFromCustomer').onclick = () => show('home');

// Change info logic
document.getElementById('searchChangeInfoBtn').onclick = () => {
  const model = document.getElementById('changeInfoModelSearch').value.trim();
  const items = JSON.parse(localStorage.getItem('models') || '{}');
  const container = document.getElementById('changeInfoResult');
  container.innerHTML = '';
  if(!items[model]) { container.innerText = 'Model not found'; return; }
  currentModel = model;

  ['small','medium','large'].forEach(size => {
    const data = items[model][size];
    container.innerHTML += `<h3>${size}</h3>
      <label>Print Time</label><input type='number' id='editPrintTime${size}' value='${data.printTime || ''}'>
      <label>Filament Cost</label><input type='number' id='editFilamentCost${size}' value='${data.filamentCost || ''}'>
      <label>Sell Price</label><input type='number' id='editSellPrice${size}' value='${data.sellPrice || ''}'>
      <label>Important Info</label><textarea id='editInfo${size}'>${data.importantInfo || ''}</textarea>`;
  });
  container.innerHTML += `<button id='saveChangesBtn'>Save Changes</button>`;

  document.getElementById('saveChangesBtn').onclick = () => {
    ['small','medium','large'].forEach(size => {
      items[model][size].printTime = document.getElementById('editPrintTime'+size).value;
      items[model][size].filamentCost = document.getElementById('editFilamentCost'+size).value;
      items[model][size].sellPrice = document.getElementById('editSellPrice'+size).value;
      items[model][size].importantInfo = document.getElementById('editInfo'+size).value;
    });
    localStorage.setItem('models', JSON.stringify(items));
    alert('Changes saved!');
  };
};

document.getElementById('backToHomeFromChangeInfo').onclick = () => show('home');
</script>
</body>
</html>
